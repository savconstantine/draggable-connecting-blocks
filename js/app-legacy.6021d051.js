(function(){"use strict";var t={1776:function(t,e,n){n(6992),n(8674),n(9601),n(7727);var o=n(9963),i=n(6252),s=n.p+"img/delete.aae51811.svg",r={id:"app"},l={class:"innerElement"},a=["onClick"],h=["onClick"],c=["onClick"],f=["onClick"],u={key:0,class:"remove-area"},p=["onClick"],g={style:{width:"100%",height:"100%"},width:"500",height:"500"},d=["onClick","x1","y1","x2","y2"],k=["x1","y1","x2","y2"];function m(t,e,n,o,m,b){var y=(0,i.up)("DragBlock");return(0,i.wg)(),(0,i.iD)("div",r,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(m.blocks,(function(t,e){return(0,i.wg)(),(0,i.j4)(y,{"top-prop":t.topProp,"left-prop":t.leftProp,onDragging:function(t){return b.handleDragging(e)},key:"dragBlock"+e},{default:(0,i.w5)((function(){return[(0,i._)("div",l,[(0,i._)("div",{class:"host topHost",ref_for:!0,ref:"topHost"+e,onClick:function(t){return b.setLine(e,"topHost")}},null,8,a),(0,i._)("div",{class:"host rightHost",ref_for:!0,ref:"rightHost"+e,onClick:function(t){return b.setLine(e,"rightHost")}},null,8,h),(0,i._)("div",{class:"host bottomHost",ref_for:!0,ref:"bottomHost"+e,onClick:function(t){return b.setLine(e,"bottomHost")}},null,8,c),(0,i._)("div",{class:"host leftHost",ref_for:!0,ref:"leftHost"+e,onClick:function(t){return b.setLine(e,"leftHost")}},null,8,f),!1===m.lineCreating.status?((0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("img",{onClick:function(t){return b.removeBlock(e)},src:s},null,8,p)])):(0,i.kq)("",!0)])]})),_:2},1032,["top-prop","left-prop","onDragging"])})),128)),((0,i.wg)(),(0,i.iD)("svg",g,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(m.lines,(function(t,e){return(0,i.wg)(),(0,i.iD)("line",{class:"line",onClick:function(t){return b.removeLine(e)},x1:m.blocks[t.start.blockID][t.start.host]["x"],y1:m.blocks[t.start.blockID][t.start.host]["y"],x2:m.blocks[t.end.blockID][t.end.host]["x"],y2:m.blocks[t.end.blockID][t.end.host]["y"],stroke:"black",key:"line"+e},null,8,d)})),128)),!0===m.lineCreating.status?((0,i.wg)(),(0,i.iD)("line",{key:0,x1:m.lineCreating.x1,y1:m.lineCreating.y1,x2:m.lineCreating.x2,y2:m.lineCreating.y2,stroke:"black"},null,8,k)):(0,i.kq)("",!0)])),!0===m.lineCreating.status?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button red",onClick:e[0]||(e[0]=function(t){return b.cancelLineCreating()})},"Cancel connection creation")):((0,i.wg)(),(0,i.iD)("button",{key:1,class:"button",onClick:e[1]||(e[1]=function(t){return b.addBlock()})},"Add New Block"))])}var b=n(4648);n(7327),n(1539),n(1249),n(7941);function y(t,e,n,s,r,l){return(0,i.wg)(),(0,i.iD)("div",{class:"drag-block",onMousedown:e[0]||(e[0]=(0,o.iM)((function(){return l.drag&&l.drag.apply(l,arguments)}),["stop"])),onMouseup:e[1]||(e[1]=(0,o.iM)((function(){return l.drop&&l.drop.apply(l,arguments)}),["stop"]))},[(0,i.WI)(t.$slots,"default")],32)}n(9653);var v={name:"DragBlock",props:{topProp:{type:Number,default:0},leftProp:{type:Number,default:0}},data:function(){return{shiftY:null,shiftX:null,left:0,top:0,element:null,parent:{width:0,height:0}}},methods:{elementMove:function(t){this.$emit("dragging"),t.preventDefault();var e=t.pageX,n=t.pageY,o=e-this.shiftX,i=n-this.shiftY,s=e-this.shiftX+this.element.offsetWidth,r=n-this.shiftY+this.element.offsetHeight;o=o<0?0:s>this.parent.width?this.parent.width-this.element.offsetWidth:e-this.shiftX,i=i<0?0:r>this.parent.height?this.parent.height-this.element.offsetHeight:n-this.shiftY,this.element.style.left="".concat(o,"px"),this.left=o,this.element.style.top="".concat(i,"px"),this.top=i},drag:function(t){this.parent.width=this.parentWidth||this.element.parentNode.offsetWidth,this.parent.height=this.parentHeight||this.element.parentNode.offsetHeight,this.shiftX=t.pageX-this.element.offsetLeft,this.shiftY=t.pageY-this.element.offsetTop,t.pageX&&(this.element.addEventListener("mousemove",this.elementMove),this.element.addEventListener("mouseleave",this.drop))},drop:function(){this.element.removeEventListener("mousemove",this.elementMove,!1),this.element.onmouseup=null}},mounted:function(){this.element=this.$el,this.element.style.left="".concat(this.leftProp,"px"),this.left=this.leftProp,this.element.style.top="".concat(this.topProp,"px"),this.top=this.topProp}},H=n(3744);const x=(0,H.Z)(v,[["render",y]]);var C=x,D={name:"App",components:{DragBlock:C},data:function(){return{lineCreating:{status:!1,x1:0,y1:0,x2:0,y2:0,prepLine:{start:{blockID:"",host:""},end:{blockID:"",host:""}}},blocks:{1:{id:1,topProp:123,leftProp:245,topHost:{x:280,y:108},rightHost:{x:330,y:158},bottomHost:{x:280,y:208},leftHost:{x:230,y:158}},2:{id:2,topProp:323,leftProp:234,topHost:{x:269,y:308},rightHost:{x:319,y:358},bottomHost:{x:269,y:408},leftHost:{x:219,y:358}},3:{id:3,topProp:0,leftProp:0,topHost:{x:35,y:-15},rightHost:{x:85,y:35},bottomHost:{x:35,y:85},leftHost:{x:-15,y:35}}},lines:{1:{id:1,start:{blockID:3,host:"bottomHost"},end:{blockID:2,host:"leftHost"}},2:{id:2,start:{blockID:1,host:"bottomHost"},end:{blockID:2,host:"topHost"}}}}},computed:{},mounted:function(){},destroyed:function(){window.removeEventListener("mousemove",this.mouseIsMoving)},methods:{removeLine:function(t){delete this.lines[t]},removeBlock:function(t){var e=this.lines,n=this;Object.keys(e).map((function(t){return e[t]})).filter((function(e){e.start.blockID!=t&&e.end.blockID!=t||delete n.lines[e.id]})),delete this.blocks[t]},addBlock:function(){var t=0,e=700,n=String(Math.random()),o={id:n,topProp:Math.random()*(e-t)+t,leftProp:Math.random()*(e-t)+t,topHost:{x:35,y:-15},rightHost:{x:85,y:35},bottomHost:{x:35,y:85},leftHost:{x:-15,y:35}};this.blocks[o.id]=o},cancelLineCreating:function(){this.lineCreating={status:!1,x1:0,y1:0,x2:0,y2:0,prepLine:{start:{blockID:"",host:""},end:{blockID:"",host:""}}}},mouseIsMoving:function(t){this.lineCreating.x2=t.pageX,this.lineCreating.y2=t.pageY},setLine:function(t,e){if(this.updateHostCoordinatesByBlockID(t),!1===this.lineCreating.status)this.lineCreating.status=!0,this.lineCreating.x1=this.blocks[t][e]["x"],this.lineCreating.y1=this.blocks[t][e]["y"],this.lineCreating.x2=this.blocks[t][e]["x"],this.lineCreating.y2=this.blocks[t][e]["y"],this.lineCreating.prepLine.start={blockID:t,host:e},window.addEventListener("mousemove",this.mouseIsMoving);else{window.removeEventListener("mousemove",this.mouseIsMoving),this.lineCreating.prepLine.end={blockID:t,host:e};var n=(0,b.Z)({id:String(Math.random())},this.lineCreating.prepLine);this.lines[n.id]=n,this.lineCreating.x1=0,this.lineCreating.y1=0,this.lineCreating.x2=0,this.lineCreating.y2=0,this.lineCreating.status=!1}},getPos:function(t){for(var e=0,n=0;null!=t;e+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent);return{x:e,y:n}},updateHostCoordinatesByBlockID:function(t){this.blocks[t]["topHost"]=this.getPos(this.$refs["topHost"+t][0]),this.blocks[t]["rightHost"]=this.getPos(this.$refs["rightHost"+t][0]),this.blocks[t]["bottomHost"]=this.getPos(this.$refs["bottomHost"+t][0]),this.blocks[t]["leftHost"]=this.getPos(this.$refs["leftHost"+t][0])},handleDragging:function(t){this.updateHostCoordinatesByBlockID(t)}}};const w=(0,H.Z)(D,[["render",m]]);var I=w,P=n(3907),L=(0,P.MT)({state:{},mutations:{},actions:{},modules:{}}),_=L;(0,o.ri)(I).use(_).mount("#app")}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var s=e[o]={exports:{}};return t[o](s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,o,i,s){if(!o){var r=1/0;for(c=0;c<t.length;c++){o=t[c][0],i=t[c][1],s=t[c][2];for(var l=!0,a=0;a<o.length;a++)(!1&s||r>=s)&&Object.keys(n.O).every((function(t){return n.O[t](o[a])}))?o.splice(a--,1):(l=!1,s<r&&(r=s));if(l){t.splice(c--,1);var h=i();void 0!==h&&(e=h)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[o,i,s]}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.p="/draggable-connecting-blocks/"}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,s,r=o[0],l=o[1],a=o[2],h=0;if(r.some((function(e){return 0!==t[e]}))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(a)var c=a(n)}for(e&&e(o);h<r.length;h++)s=r[h],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(c)},o=self["webpackChunkkonstantin_draggable_connecting_blocks"]=self["webpackChunkkonstantin_draggable_connecting_blocks"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(1776)}));o=n.O(o)})();
//# sourceMappingURL=app-legacy.6021d051.js.map