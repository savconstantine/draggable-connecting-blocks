(function(){"use strict";var t={709:function(t,e,o){var s=o(963),i=o(252),n=o(577),l=o.p+"img/delete.aae51811.svg";const r={id:"main"},a={class:"innerElement"},h=["onClick"],c={key:0,class:"remove-area"},p=["onClick"],g={style:{width:"100%",height:"100%"},width:"5000",height:"5000"},d=["onClick","x1","y1","x2","y2"],f=["x1","y1","x2","y2"];function u(t,e,o,s,u,k){const b=(0,i.up)("DragBlock");return(0,i.wg)(),(0,i.iD)("div",r,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(u.blocks,((t,e)=>((0,i.wg)(),(0,i.j4)(b,{"top-prop":t.topProp,"left-prop":t.leftProp,onDragging:t=>k.handleDragging(e),key:"dragBlock"+e},{default:(0,i.w5)((()=>[(0,i._)("div",a,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(u.lineHosts,((t,o)=>((0,i.wg)(),(0,i.iD)("div",{key:"lineHost"+e+"_"+o,class:(0,n.C_)(["host",t+"Host"]),ref_for:!0,ref:t+"Host"+e,onClick:o=>k.setLine(e,t+"Host")},null,10,h)))),128)),!1===u.lineCreating.status?((0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("img",{onClick:t=>k.removeBlock(e),src:l},null,8,p)])):(0,i.kq)("",!0)])])),_:2},1032,["top-prop","left-prop","onDragging"])))),128)),((0,i.wg)(),(0,i.iD)("svg",g,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(u.lines,((t,e)=>((0,i.wg)(),(0,i.iD)("line",{class:"line",onClick:t=>k.removeLine(e),x1:u.blocks[t.start.blockID][t.start.host]["x"],y1:u.blocks[t.start.blockID][t.start.host]["y"],x2:u.blocks[t.end.blockID][t.end.host]["x"],y2:u.blocks[t.end.blockID][t.end.host]["y"],stroke:"black",key:"line"+e},null,8,d)))),128)),!0===u.lineCreating.status?((0,i.wg)(),(0,i.iD)("line",{key:0,x1:u.lineCreating.x1,y1:u.lineCreating.y1,x2:u.lineCreating.x2,y2:u.lineCreating.y2,stroke:"black"},null,8,f)):(0,i.kq)("",!0)])),!0===u.lineCreating.status?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button red",onClick:e[0]||(e[0]=t=>k.cancelLineCreating())},"Cancel connection creation")):((0,i.wg)(),(0,i.iD)("button",{key:1,class:"button",onClick:e[1]||(e[1]=t=>k.addBlock())},"Add New Block"))])}function k(t,e,o,n,l,r){return(0,i.wg)(),(0,i.iD)("div",{class:"drag-block",onMousedown:e[0]||(e[0]=(0,s.iM)(((...t)=>r.drag&&r.drag(...t)),["stop"])),onMouseup:e[1]||(e[1]=(0,s.iM)(((...t)=>r.drop&&r.drop(...t)),["stop"]))},[(0,i.WI)(t.$slots,"default")],32)}var b={name:"DragBlock",props:{topProp:{type:Number,default:0},leftProp:{type:Number,default:0}},data(){return{shiftY:null,shiftX:null,left:0,top:0,element:null,parent:{width:0,height:0}}},methods:{elementMove(t){this.$emit("dragging"),t.preventDefault();const e=t.pageX,o=t.pageY;let s=e-this.shiftX,i=o-this.shiftY;const n=e-this.shiftX+this.element.offsetWidth,l=o-this.shiftY+this.element.offsetHeight;s=s<0?0:n>this.parent.width?this.parent.width-this.element.offsetWidth:e-this.shiftX,i=i<0?0:l>this.parent.height?this.parent.height-this.element.offsetHeight:o-this.shiftY,this.element.style.left=`${s}px`,this.left=s,this.element.style.top=`${i}px`,this.top=i},drag(t){this.parent.width=this.parentWidth||this.element.parentNode.offsetWidth,this.parent.height=this.parentHeight||this.element.parentNode.offsetHeight,this.shiftX=t.pageX-this.element.offsetLeft,this.shiftY=t.pageY-this.element.offsetTop,t.pageX&&(this.element.addEventListener("mousemove",this.elementMove),this.element.addEventListener("mouseleave",this.drop))},drop(){this.element.removeEventListener("mousemove",this.elementMove,!1),this.element.onmouseup=null}},mounted(){this.element=this.$el,this.element.style.left=`${this.leftProp}px`,this.left=this.leftProp,this.element.style.top=`${this.topProp}px`,this.top=this.topProp}},m=o(744);const y=(0,m.Z)(b,[["render",k]]);var x=y,v={name:"App",components:{DragBlock:x},data(){return{lineHosts:["top","right","bottom","left"],lineCreating:{status:!1,x1:0,y1:0,x2:0,y2:0,prepLine:{start:{blockID:"",host:""},end:{blockID:"",host:""}}},blocks:{1:{id:1,topProp:123,leftProp:245,topHost:{x:280,y:108},rightHost:{x:330,y:158},bottomHost:{x:280,y:208},leftHost:{x:230,y:158}},2:{id:2,topProp:323,leftProp:234,topHost:{x:269,y:308},rightHost:{x:319,y:358},bottomHost:{x:269,y:408},leftHost:{x:219,y:358}},3:{id:3,topProp:0,leftProp:0,topHost:{x:35,y:-15},rightHost:{x:85,y:35},bottomHost:{x:35,y:85},leftHost:{x:-15,y:35}}},lines:{1:{id:1,start:{blockID:3,host:"bottomHost"},end:{blockID:2,host:"leftHost"}},2:{id:2,start:{blockID:1,host:"bottomHost"},end:{blockID:2,host:"topHost"}}}}},computed:{blocks2(){return this.$store.state.blocks}},beforeMount(){},mounted(){Object.keys(this.blocks).forEach((t=>this.updateHostCoordinatesByBlockID(t)))},destroyed:function(){window.removeEventListener("mousemove",this.mouseIsMoving)},methods:{removeLine(t){delete this.lines[t]},removeBlock(t){let e=this.lines,o=this;Object.keys(e).map((t=>e[t])).filter((function(e){e.start.blockID!=t&&e.end.blockID!=t||delete o.lines[e.id]})),delete this.blocks[t]},addBlock(){let t=0,e=700,o=String(Math.random());const s={id:o,topProp:Math.random()*(e-t)+t,leftProp:Math.random()*(e-t)+t,topHost:{x:35,y:-15},rightHost:{x:85,y:35},bottomHost:{x:35,y:85},leftHost:{x:-15,y:35}};this.blocks[s.id]=s},cancelLineCreating(){this.lineCreating={status:!1,x1:0,y1:0,x2:0,y2:0,prepLine:{start:{blockID:"",host:""},end:{blockID:"",host:""}}}},mouseIsMoving(t){this.lineCreating.x2=t.pageX,this.lineCreating.y2=t.pageY},setLine(t,e){if(this.updateHostCoordinatesByBlockID(t),!1===this.lineCreating.status)this.lineCreating.status=!0,this.lineCreating.x1=this.blocks[t][e]["x"],this.lineCreating.y1=this.blocks[t][e]["y"],this.lineCreating.x2=this.blocks[t][e]["x"],this.lineCreating.y2=this.blocks[t][e]["y"],this.lineCreating.prepLine.start={blockID:t,host:e},window.addEventListener("mousemove",this.mouseIsMoving);else{window.removeEventListener("mousemove",this.mouseIsMoving),this.lineCreating.prepLine.end={blockID:t,host:e};const o={id:String(Math.random()),...this.lineCreating.prepLine};this.lines[o.id]=o,this.lineCreating.x1=0,this.lineCreating.y1=0,this.lineCreating.x2=0,this.lineCreating.y2=0,this.lineCreating.status=!1}},getPos(t){let e=0,o=0;for(e=0,o=0;null!=t;e+=t.offsetLeft,o+=t.offsetTop,t=t.offsetParent);return{x:e+15,y:o+15}},updateHostCoordinatesByBlockID(t){this.blocks[t]["topHost"]=this.getPos(this.$refs["topHost"+t][0]),this.blocks[t]["rightHost"]=this.getPos(this.$refs["rightHost"+t][0]),this.blocks[t]["bottomHost"]=this.getPos(this.$refs["bottomHost"+t][0]),this.blocks[t]["leftHost"]=this.getPos(this.$refs["leftHost"+t][0])},handleDragging(t){this.updateHostCoordinatesByBlockID(t)}}};const H=(0,m.Z)(v,[["render",u]]);var C=H,D=o(907);const w=(0,D.MT)({state:{lineCreating:{status:!1,x1:0,y1:0,x2:0,y2:0,prepLine:{start:{blockID:"",host:""},end:{blockID:"",host:""}}},blocks:{1:{id:1,topProp:123,leftProp:245,topHost:{x:280,y:108},rightHost:{x:330,y:158},bottomHost:{x:280,y:208},leftHost:{x:230,y:158}},2:{id:2,topProp:323,leftProp:234,topHost:{x:269,y:308},rightHost:{x:319,y:358},bottomHost:{x:269,y:408},leftHost:{x:219,y:358}},3:{id:3,topProp:0,leftProp:0,topHost:{x:35,y:-15},rightHost:{x:85,y:35},bottomHost:{x:35,y:85},leftHost:{x:-15,y:35}}},lines:{1:{id:1,start:{blockID:3,host:"bottomHost"},end:{blockID:2,host:"leftHost"}},2:{id:2,start:{blockID:1,host:"bottomHost"},end:{blockID:2,host:"topHost"}}}},mutations:{removeLine(t,e){delete t.lines[e]},removeBlock(t,e){let o=t.lines,s=t;Object.keys(o).map((t=>o[t])).filter((function(t){t.start.blockID!=e&&t.end.blockID!=e||delete s.lines[t.id]})),delete t.blocks[e]},addBlock(t){let e=0,o=700,s=String(Math.random());const i={id:s,topProp:Math.random()*(o-e)+e,leftProp:Math.random()*(o-e)+e,topHost:{x:35,y:-15},rightHost:{x:85,y:35},bottomHost:{x:35,y:85},leftHost:{x:-15,y:35}};t.blocks[i.id]=i},cancelLineCreating(t){t.lineCreating={status:!1,x1:0,y1:0,x2:0,y2:0,prepLine:{start:{blockID:"",host:""},end:{blockID:"",host:""}}}},setLine(t,e,o){if(this.updateHostCoordinatesByBlockID(e),!1===this.lineCreating.status)this.lineCreating.status=!0,this.lineCreating.x1=this.blocks[e][o]["x"],this.lineCreating.y1=this.blocks[e][o]["y"],this.lineCreating.x2=this.blocks[e][o]["x"],this.lineCreating.y2=this.blocks[e][o]["y"],this.lineCreating.prepLine.start={blockID:e,host:o},window.addEventListener("mousemove",this.mouseIsMoving);else{window.removeEventListener("mousemove",this.mouseIsMoving),this.lineCreating.prepLine.end={blockID:e,host:o};const t={id:String(Math.random()),...this.lineCreating.prepLine};this.lines[t.id]=t,this.lineCreating.x1=0,this.lineCreating.y1=0,this.lineCreating.x2=0,this.lineCreating.y2=0,this.lineCreating.status=!1}}},actions:{},modules:{}});var I=w;(0,s.ri)(C).use(I).mount("#app")}},e={};function o(s){var i=e[s];if(void 0!==i)return i.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,o),n.exports}o.m=t,function(){var t=[];o.O=function(e,s,i,n){if(!s){var l=1/0;for(c=0;c<t.length;c++){s=t[c][0],i=t[c][1],n=t[c][2];for(var r=!0,a=0;a<s.length;a++)(!1&n||l>=n)&&Object.keys(o.O).every((function(t){return o.O[t](s[a])}))?s.splice(a--,1):(r=!1,n<l&&(l=n));if(r){t.splice(c--,1);var h=i();void 0!==h&&(e=h)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[s,i,n]}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.p="/draggable-connecting-blocks/"}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,n,l=s[0],r=s[1],a=s[2],h=0;if(l.some((function(e){return 0!==t[e]}))){for(i in r)o.o(r,i)&&(o.m[i]=r[i]);if(a)var c=a(o)}for(e&&e(s);h<l.length;h++)n=l[h],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(c)},s=self["webpackChunkkonstantin_draggable_connecting_blocks"]=self["webpackChunkkonstantin_draggable_connecting_blocks"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(709)}));s=o.O(s)})();
//# sourceMappingURL=app.7e1db3b2.js.map